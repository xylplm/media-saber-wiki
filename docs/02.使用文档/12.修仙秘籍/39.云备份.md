---
title: 云备份
action: false
tags:
  - 修仙秘籍
categories:
editor: markdown
permalink: /docs/cultivation_secrets/cloud_backup/
date: 2025-11-19 00:00:00
---

# ☁️ 云备份

**云备份** 插件用于定时将本地文件同步到云存储（例如挂载的对象存储目录），并可选启用本地加密 / 解密功能，提升重要数据的安全性。

> 与「自动备份」插件偏向备份系统配置不同，「云备份」更偏向**目录级文件备份与加解密**。

## ⚙️ 功能特点

- 将本地指定目录的文件同步到云存储目录
- 支持基于 AES-GCM 的文件加密 / 解密
- 支持 `.gitignore` 语法的文件忽略规则
- 支持断点恢复与「恢复出厂」重置
- 支持定时任务和手动运行

## 🚀 配置指南

以下字段对应插件配置页面中的选项：

### 📋 通用选项

1. **消息推送 (notice)**
   - 选填，布尔开关
   - 开启后会将本次任务结果通过通知渠道发送

2. **跳过首次 (skipFirst)**
   - 选填，布尔开关
   - 首次运行时忽略当前已有文件，只记录基线，从下一次开始增量备份

3. **动态目录 (dynamicDir)**
   - 选填，布尔开关
   - 适用于持续写入的大文件目录
   - 开启后会额外检查文件写入状态，存在一定性能开销，不建议无必要时开启

4. **周期 (cron)**
   - 选填
   - 使用 Cron 表达式配置备份频率，例如：`0 * * * *` 每小时一次

### 📂 路径与加密相关

5. **备份路径 (localPath)**
   - 必填
   - 要进行备份的本地目录
   - 存储类型固定为本地（`selectedStorageType = 1`）

6. **加密算法 (aesType)**
   - 选填，数字类型
   - 通过下拉选项选择安全级别：常规 / 较高 / 最高安全等级等
   - **算法保存后不能更改**

7. **密钥 (key)**
   - 选填，字符串
   - AES 加密密钥，建议使用「生成密钥」按钮自动生成
   - **保存后不能更改，请务必妥善备份！**

8. **生成密钥 (genKey)**
   - 按钮
   - 先选择算法并保存配置，再点击此按钮自动生成并填充密钥

9. **加密路径 (encryptOutputPath)**
   - 选填
   - 加密后文件存放目录，需要有写权限

10. **一键加密 (encrypt)**
    - 按钮
    - 将「备份路径」中的所有文件加密后输出到「加密路径」

11. **备份成功删除加密文件 (deleteEncryptFileAfterBackup)**
    - 选填
    - 开启后，在成功完成云备份后删除加密路径下的中间文件

12. **云存储路径 (cloudPath)**
    - 必填
    - 实际云存储挂载目录（例如对象存储挂载点），存放最终备份文件
    - 存储类型固定为云存储（`selectedStorageType = 2`）

### 🧹 忽略与解密

13. **文件忽略 (ignorePatterns)**
    - 选填，多行文本
    - 使用 `.gitignore` 规则过滤文件，多个规则用换行分隔
    - 示例配置（界面中也有推荐）：
      ```
      .DS_Store
      ._*
      .Trashes/
      Thumbs.db
      desktop.ini
      logs/
      *.tmp
      **/cache/**
      !**/cache/config.json
      ```

14. **要解密的路径 (decryptInputPath)**
    - 选填
    - 需要解密的加密文件所在目录

15. **解密输出路径 (decryptOutputPath)**
    - 选填
    - 解密后文件输出目录，需要写权限

16. **一键解密 (decrypt)**
    - 按钮
    - 将「要解密的路径」中的文件全部按当前配置解密到「解密输出路径」

### 🛠️ 工具栏操作

17. **运行一次 (run)**
    - 立即执行一次完整备份流程（含加密 / 同步等）

18. **异常中断恢复 (continueForBreak)**
    - 用于在重启或异常中断后继续未完成的备份任务

19. **恢复出厂设置 (reset)**
    - 清空所有备份相关记录与元数据，将插件状态重置

20. **温馨提示 (tips)**
    - 只读说明：当前采用 AES-GCM 算法，支持大文件自适应分块加解密

## ⚠️ 注意事项

- 请务必妥善保管加密密钥，一旦遗失，将无法解密已加密的备份文件。
- 建议在正式使用前，选取小范围文件做加解密演练，确认流程正确。
- 云存储路径所在的挂载目录需要保证长期稳定可用，否则备份可能失败。
- 动态目录模式仅在确有大文件持续写入的情况才考虑开启，以免造成不必要的性能开销。

## 🔗 相关链接

- [修仙秘籍主页](/docs/cultivation_secrets/main/)
- [Cron 表达式说明](/docs/other/cron_rule/)

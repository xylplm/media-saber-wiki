---
title: ç¾¤æ™–NASå¦‚ä½•å®‰è£…
article: false
date: 2023-05-15T09:22:05.263Z
tags:
categories: 
  - æ–°æ‰‹æŒ‡å¼•
  - å¦‚ä½•å®‰è£…
editor: markdown
dateCreated: 2023-05-12T04:25:24.817Z
permalink: /guide/install/synology
---

:::danger âš ï¸ æ³¨æ„äº‹é¡¹
- ä¸ºäº†é¡¹ç›®çš„å®‰å…¨æ€§ï¼Œè¯·åŠ¡å¿…æ³¨æ„ï¼š**è¯·å‹¿å¤–ä¼ ï¼è¯·å‹¿å¤–ä¼ ï¼è¯·å‹¿å¤–ä¼ ï¼**
- é¡¹ç›®è¿è¡Œéœ€è¦è‡ªè¡Œæ·»åŠ  **æ¿€æ´»å¯†é’¥**ï¼Œæ­¤å¤„ä¸äºˆè¯´æ˜ã€‚
:::

:::note ğŸ™ è‡´è°¢
ç‰¹åˆ«æ„Ÿè°¢ `@XXX` å¤§ä½¬ä¸ºå¤§å®¶å¸¦æ¥æœ¬ç¯‡ç¾¤æ™–éƒ¨ç½²æ•™ç¨‹ã€‚
:::

### 1. æ–‡ä»¶å¤¹å‡†å¤‡

æ‰“å¼€ **ç¾¤æ™– File Station**ï¼Œåœ¨ `docker` ç›®å½•ä¸‹æ–°å»ºä»¥ä¸‹æ–‡ä»¶å¤¹ï¼š

- `/docker/redis/data`
- `/docker/Media-Saber/config`

ç¡®ä¿è¿™äº›æ–‡ä»¶å¤¹å…·æœ‰**å†™å…¥æƒé™**ã€‚

<div align="center"><img src="./synology_images/01.png" width="800"/></div>  
<div align="center"><img src="./synology_images/02.png" width="800"/></div>  

---

### 2. ä½¿ç”¨ Container Manager éƒ¨ç½² Redis

é€‚ç”¨äº DSM 7.2 åŠä»¥ä¸Šç‰ˆæœ¬ï¼Œæ¨èä½¿ç”¨ **Container Manager** è¿›è¡Œéƒ¨ç½²ã€‚

æ‰“å¼€ Container Manager â†’ é¡¹ç›® â†’ æ–°å¢é¡¹ç›®ï¼š

- é¡¹ç›®åç§°ï¼š`redis`
- é¡¹ç›®è·¯å¾„ï¼šæŒ‡å‘åˆšåˆšåˆ›å»ºçš„æ–‡ä»¶å¤¹è·¯å¾„
- æ¥æºï¼šé€‰æ‹©ã€Œåˆ›å»º docker-compose.yamlã€
- ç²˜è´´ä»¥ä¸‹å†…å®¹ï¼š

```yaml
version: "3.3"
services:
  redis:
    image: redis:latest
    container_name: redis
    restart: always
    ports:
      - 6379:6379
    environment:
      - REDIS_PASSWORD=**********
    volumes:
      - /volume1/docker/redis/data:/data
```
è¯·å°† /volume1/docker/redis/data ä¿®æ”¹ä¸ºä½ å®é™…çš„è·¯å¾„ï¼Œå¹¶ä¸º REDIS_PASSWORD è®¾ç½®ä½ çš„ Redis å¯†ç ã€‚

<div align="center"><img src="./synology_images/03.png" width="800"/></div>
<div align="center"><img src="./synology_images/04.png" width="800"/></div>
<div align="center"><img src="./synology_images/05.png" width="800"/></div>
ç‚¹å‡»ã€Œå®Œæˆã€ï¼Œç³»ç»Ÿå°†è‡ªåŠ¨ä» Docker Hub æ‹‰å– Redis é•œåƒå¹¶æ„å»ºå®¹å™¨ã€‚

### 3. ä½¿ç”¨ Container Manager éƒ¨ç½² Media-Saber
éƒ¨ç½²æ–¹å¼åŒ Redisï¼Œæ–°å¢ä¸€ä¸ªé¡¹ç›®ï¼š

é¡¹ç›®åç§°ï¼šmedia-saber

é¡¹ç›®è·¯å¾„ï¼šæŒ‡å‘ /docker/Media-Saber

æ¥æºï¼šé€‰æ‹©ã€Œåˆ›å»º docker-compose.yamlã€

ç²˜è´´ä»¥ä¸‹å†…å®¹ï¼š
```shell
services:
  msgo:
    image: xylplm/media-saber:go-dev
    container_name: msgo
    networks: 
      - ms_network
    environment:
      - PUID=0
      - PGID=0
      - UMASK=022
      - TZ=Asia/Shanghai
      - MS_PORT=3005
      - MS_AUTH_EMAIL=name@sample.com
      - MS_AUTH_SLOGAN=å¤§ä½¬ç‰›é€¼
      - MS_LOG_LEVEL=debug
      - MS_REDIS_HOST=ms-redis:6379
      - MS_REDIS_PASS=**********
      - MS_TIMEOUT=60000
      - MS_PGSQL_USERNAME=postgres
      - MS_PGSQL_PASSWORD=ms888888
      - MS_PGSQL_PATH=ms-pgsql
      - MS_PGSQL_PORT=5432
      - MS_PGSQL_DBNAME=ms
      - MS_PGSQL_LOG_MODE=prod
      - MS_LOG_KEEP_DAYS=14
    restart: unless-stopped
    privileged: true
    volumes:
      - /volume2/docker/media-saberGo/ms/config:/app/config
      - /volume2/video:/video
    ports:
      - "3005:3005"

  redis:
    image: redis:latest
    container_name: ms-redis
    restart: unless-stopped
    networks: 
      - ms_network
    volumes:
      - ./redis/config:/data
    environment:
      - TZ=Asia/Shanghai
      - GOSU_VERSION=1.17

  pgsql:
    image: postgres:17-alpine
    container_name: ms-pgsql
    restart: unless-stopped
    networks: 
      - ms_network
    volumes:
      - /volume2/docker/media-saberGo/pgsql/data:/var/lib/postgresql/data
    environment:
      - POSTGRES_USER=postgres
      - POSTGRES_DB=ms
      - POSTGRESQL_WAL_COMPRESSION=lz4
      - POSTGRESQL_MAX_CONNECTIONS=2048
      - POSTGRES_PASSWORD=ms888888

networks:
  ms_network:
    name: ms_network
    driver: bridge
    ipam:
      config:
        - subnet: 172.31.126.0/24
          gateway: 172.31.126.1
```
<div align="center"><img src="./synology_images/06.png" width="800"/></div>
:::warning âš™ï¸ è¯·ä¿®æ”¹ä»¥ä¸‹å‚æ•°ï¼š

**********ï¼šRedis å¯†ç 

MS_AUTH_EMAILï¼šè®¿é—®é‚®ç®±è®¤è¯

MS_AUTH_SLOGANï¼šè®¤è¯å£ä»¤

å…¶ä½™å‚æ•°ä¿æŒé»˜è®¤å³å¯
:::

ç‚¹å‡»ã€Œå®Œæˆã€ï¼ŒContainer Manager ä¼šè‡ªåŠ¨æ‹‰å– Media-Saber é•œåƒå¹¶æ„å»ºæœåŠ¡ã€‚

